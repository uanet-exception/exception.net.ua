---
author: "ZEN"
title: "–°–≤–æ—î –≤–ª–∞—Å–Ω–µ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥—ñ–æ"
description: ""
date: 2024-05-17T14:57:52+03:00
lastmod: 2024-05-17T14:57:52+03:00
tags:
  - "mixxx"
  - "icecast"
  - "liquidsoap"
  - "webradio"
  - "selfhost"
  - "nginx"
  - "docker"
categories:
  - "Other"
type: "post"
archives: "2024"
---

–í —Å—É—á–∞—Å–Ω–æ–º—É —Å–≤—ñ—Ç—ñ –ª—é–¥–∏ –±—ñ–ª—å—à–µ –Ω–∞–¥–∞—é—Ç—å –ø–µ—Ä–µ–≤–∞–≥—É —Å—Ç—Ä—ñ–º—ñ–Ω–≥–æ–≤–∏–º —Å–µ—Ä–≤—ñ—Å–∞–º, —Ç–æ–¥—ñ —è–∫ –º–µ–Ω—ñ –±—ñ–ª—å—à–µ –¥–æ –≤–ø–æ–¥–æ–±–∏ —Å–ª—É—Ö–∞—Ç–∏ –º—É–∑–∏–∫—É —ñ–∑ –≤–ª–∞—Å–Ω–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó. –î–æ —Ç–æ–≥–æ –∂ —Ü–µ –Ω–∞–¥–∞—î –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ —É —Ç–æ–º—É, —â–æ –∑–∞–≤—Ç—Ä–∞ —á–∏ –ø—ñ—Å–ª—è–∑–∞–≤—Ç—Ä–∞ —Å—Ç—Ä—ñ–º—ñ–Ω–≥–æ–≤–∏–π —Å–µ—Ä–≤—ñ—Å –Ω–µ –≤–∏–¥–∞–ª–∏—Ç—å —Ç—Ä–µ–∫–∏ –∑ –º–æ—ó—Ö –ø–ª–µ–π–ª–∏—Å—Ç—ñ–≤ –±–µ–∑ –º–æ–≥–æ –≤—ñ–¥–æ–º–∞, —ñ —â–æ –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è—Ö –Ω–µ –≤–∏–ª—ñ–∑–µ —â–æ—Å—å —Ç–∞–∫–µ, —â–æ –∑—ñ–ø—Å—É—î –º–µ–Ω—ñ –Ω–∞—Å—Ç—Ä—ñ–π. –°—å–æ–≥–æ–¥–Ω—ñ –º–∏ —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—å —ñ–∑ —Ç–∏–º, —è–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π —Å—Ç—Ä—ñ–º—ñ–Ω–≥–æ–≤–∏–π —Å–µ—Ä–≤—ñ—Å –Ω–∞ —Å–≤–æ—î–º—É —Å–µ—Ä–≤–µ—Ä—ñ, —è–∫–∏–π –±—É–¥–µ —Å—Ç—Ä—ñ–º–∏—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤—ñ —Ç—Ä–µ–∫–∏ —ñ–∑ –≤–∞—à–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó 24/7, —ñ –ø—Ä–∏ —Ü—å–æ–º—É –∑–∞ –≤–∞–º–∏ –∑–∞–ª–∏—à–∏—Ç—å—Å—è –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —É –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç –ø—ñ–¥'—î–¥–Ω–∞—Ç–∏—Å—å —Ç–∞ —Å—Ç—Ä—ñ–º–∏—Ç–∏ –º—É–∑–∏–∫—É –ø—ñ–¥ —Å–≤—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π.

<!--more-->

–°–ø–æ—á–∞—Ç–∫—É, —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—å –∑ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é. –£ –≤–∞—Å –º–∞—î –±—É—Ç–∏ –≤–∂–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏–π —Å–≤—ñ–π –¥–æ–º–µ–Ω (—á–∏ –ø—ñ–¥–¥–æ–º–µ–Ω, —è–∫ –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `radio.example.com` –¥–∞–ª—ñ —É —Å—Ç–∞—Ç—Ç—ñ), –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π SSL —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π Nginx —Ç–∞ docker –∑ docker-compose, —â–æ–± –º–∏ –∑–º–æ–≥–ª–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ—é —Å—Ö–µ–º–æ—é:

![–ë–ª–æ–∫ —Å—Ö–µ–º–∞ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥—ñ–æ](/images/2024/webradio/webradio-schema.png#center)

–Ø–∫ –≤–∏–¥–Ω–æ –Ω–∞ —Å—Ö–µ–º—ñ, —É –Ω–∞—Å —î –≤–µ–±—Å–µ—Ä–≤–µ—Ä Nginx, —è–∫–∏–π –≤–∏—Å—Ç—É–ø–∞—î –≤ —Ä–æ–ª—ñ –ø—Ä–æ–∫—Å—ñ —Å–µ—Ä–≤–µ—Ä–∞, —Ç–∞ —ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—å–æ—ó –º–µ—Ä–µ–∂—ñ docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ - icecast, liquidsoap —Ç–∞ webplayer. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –Ω–∞–∑–≤–æ—é webplayer –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏–º–µ –∑–∞ –≤–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∞ –¥–µ—è–∫—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É, —è–∫—É –≤—ñ–Ω –≤–∏—Ç—è–≥—É–≤–∞—Ç–∏–º–µ –∑ icecast, —Ç–æ–¥—ñ —è–∫ icecast –æ–∫—Ä—ñ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏–º–µ –∑–∞ –∞—É–¥—ñ–æ –ø–æ—Ç—ñ–∫, –∫–æ—Ç—Ä–∏–π –π–æ–º—É –±—É–¥–µ —Å—Ç—Ä—ñ–º–∏—Ç–∏ liquidsoap. –î–æ —Ä–µ—á—ñ, –Ω–∞ —Å—Ö–µ–º—ñ liquidsoap –º–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏–π –Ω–∞–∑–æ–≤–Ω—ñ –ø–æ—Ä—Ç, –∞–ª–µ —è–∫—â–æ –≤–∏ –Ω–µ —Ö–æ—á–µ—Ç–µ –±—É–¥–∏ –¥—ñ-–¥–∂–µ—î–º, —Ç–æ –º–æ–∂–Ω–∞ –±—É–¥–µ –ø–æ—Ç—ñ–º –≤ docker-compose.yml –∑–∞–∫—Ä–∏—Ç–∏ –ø–æ—Ä—Ç 8888. –ù–∞—Ä–∞–∑—ñ –∂ –ø–æ—á–Ω–µ–º–æ –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Nginx, —Å—Ç–≤–æ—Ä–∏–º–æ —Å–ø–æ—á–∞—Ç–∫—É –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞:


```bash
$ sudo touch /etc/nginx/sites-available/radio.conf
$ sudo ln -s /etc/nginx/sites-available/radio.conf /etc/nginx/sites-enabled/
```

–Ü –∑–∞–ø–∏—à–µ–º–æ –≤ –Ω—å–æ–≥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∑–º—ñ—Å—Ç, —Ç—ñ–ª—å–∫–∏ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –∑–∞–º—ñ–Ω–∏—Ç–∏ `radio.example.com` –Ω–∞ —ñ–º‚Äô—è —Å–≤–æ–≥–æ –¥–æ–º–µ–Ω—É:

```nginx
server {
    listen 80;
    server_name radio.example.com;

    access_log /var/log/nginx/radio.example.com-access.log;
    error_log /var/log/nginx/radio.example.com-error.log;

    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Server $host;
    proxy_set_header X-Real-IP $remote_addr;

    location /status-json.xsl {
        access_log off;
        log_not_found off;
        proxy_pass http://127.0.0.1:8000/status-json.xsl;
    }

    location /live.mp3.m3u {
        proxy_pass http://127.0.0.1:8080;
    }

    location /live.mp3.xspf {
        proxy_pass http://127.0.0.1:8080;
    }

    location /live.mp3 {
        proxy_pass http://127.0.0.1:8000/live.mp3;
    }

    location /playlist.json {
        access_log off;
        log_not_found off;
        proxy_pass http://127.0.0.1:8080;
    }

    location / {
        return 301 https://$host$request_uri;
    }
}

server {
    listen 443 ssl;
    server_name radio.example.com;

    # ssl certs.
    ssl_certificate     /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

    access_log /var/log/nginx/radio.example.com-access.log;
    error_log /var/log/nginx/radio.example.com-error.log;

    proxy_set_header Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Server $host;
    proxy_set_header X-Real-IP $remote_addr;

    location /status-json.xsl {
        access_log off;
        log_not_found off;
        proxy_pass http://127.0.0.1:8000/status-json.xsl;
    }

    location /live.mp3.m3u {
        proxy_pass http://127.0.0.1:8080;
    }

    location /live.mp3.xspf {
        proxy_pass http://127.0.0.1:8080;
    }

    location /live.mp3 {
        proxy_pass http://127.0.0.1:8000/live.mp3;
    }

    location /playlist.json {
        access_log off;
        log_not_found off;
        proxy_pass http://127.0.0.1:8080;
    }

    location / {
        proxy_pass http://127.0.0.1:8080;
    }
}
```

–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –Ω–µ –º—ñ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ—ñ–≥ Nginx –ø–æ–º–∏–ª–æ–∫ —ñ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –π–æ–≥–æ:

```bash
$ nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
$ sudo service nginx reload
$
```

–ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤. –í–∏ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏ –±—É–¥—å-—è–∫—É —Å–≤–æ—é –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é, –¥–µ —É –≤–∞—Å –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—å `docker-compose.yml` —Ñ–∞–π–ª, —è –∂ –¥–ª—è –ø—Ä–∏–∫–ª–∞–¥—É –±—É–¥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `~/dockerized-apps/radio`. –û—Ç–∂–µ, —Å–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä–∏–º–æ —Ü—é –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é —ñ –ø–æ–∫–∏ —â–æ –ø—É—Å—Ç—ñ, –∞–ª–µ –Ω–∞–¥–∞–ª—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ, –¥–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.

```bash
~$ mkdir -p ~/dockerized-apps/radio
~$ cd ~/dockerized-apps/radio
~/dockerized-apps/radio$ mkdir -p data/{music,static}
~/dockerized-apps/radio$ touch data/{script.liq,icestats_history.json}
~/dockerized-apps/radio$ touch {.env,docker-compose.yml}
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ, –æ—Ç—Ä–∏–º–∞—î–º–æ –æ—Å—å —Ç–∞–∫—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ—î–∫—Ç—É:

```bash
~$ tree -a ~/dockerized-apps/radio
~/dockerized-apps/radio
‚îú‚îÄ‚îÄ data
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ icestats_history.json
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ music
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ script.liq
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ static
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ .env

4 directories, 4 files
```

–¢–µ–ø–µ—Ä –∑–∞–ª–∏—à–∏–ª–æ—Å—è –≤—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏ `docker-compose.yml`, `.env` —Ç–∞ `data/script.liq`. –ü–æ—á–Ω–µ–º–æ –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ, —è–∫ —è –≤–∂–µ —Ä–∞–Ω—ñ—à–µ –∑–≥–∞–¥—É–≤–∞–≤, `liquidsoap` —É –Ω–∞—Å –∑–∞–π–º–∞—Ç–∏–º–µ—Ç—å—Å—è —Ç–∏–º, —â–æ –±—É–¥–µ –≤–∏–ø–∞–¥–∫–æ–≤–æ –æ–±–∏—Ä–∞—Ç–∏ —Ç—Ä–µ–∫–∏ —ñ–∑ —Ç–µ–∫–∏ `music` –¥–ª—è —Å—Ç—Ä—ñ–º—É 24/7, —ñ –¥–æ –Ω—å–æ–≥–æ –∂ –≤–∏, –º–æ–∂–ª–∏–≤–æ, –±—É–¥–µ—Ç–µ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—å, –∫–æ–ª–∏ –∑–∞—Ö–æ—á–µ—Ç–µ –≤–∏–π—Ç–∏ –≤ –ø—Ä—è–º–∏–π –µ—Ç–µ—Ä. –Ø–∫—â–æ –∑–∞—Ö–æ—á–µ—Ç–µ –Ω–∞–≤—á–∏—Ç–∏ —Å–≤–æ—î —Ä–∞–¥—ñ–æ –Ω–æ–≤–∏–º —Ç—Ä—é–∫–∞–º, —Ç–æ —Å–∞–º–µ —Ü–µ–π —Ñ–∞–π–ª –≤–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –≤–∏–≤—á–∞—Ç–∏ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É. –ù–∞—Ä–∞–∑—ñ –∂ –≤—ñ–¥–∫—Ä–∏—î–º–æ –π–æ–≥–æ –≤ —É–ª—é–±–ª–µ–Ω–æ–º—É —Ä–µ–¥–∞–∫—Ç–æ—Ä—ñ —Ç–∞ —Å–∫–æ–ø—ñ—é—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

```bash
#!/usr/bin/liquidsoap
# Allow root
settings.init.allow_root.set(true)

settings.server.telnet.set(true)
settings.server.telnet.port.set(1234)
settings.server.telnet.bind_addr.set("0.0.0.0")
settings.harbor.bind_addrs.set(["0.0.0.0"])
# settings.log.level.set(4)

# Set environments if empty
if getenv("ICECAST_SOURCE_PASSWORD") == "" then
    setenv("ICECAST_SOURCE_PASSWORD", "hackme")
end
if getenv("ICECAST_STREAM_BITRATE") == "" then
    setenv("ICECAST_STREAM_BITRATE", "128")
end
if getenv("STREAM_NAME") == "" then
    setenv("STREAM_NAME", "Radio")
end
if getenv("STREAM_DESC") == "" then
    setenv("STREAM_DESC", "Our selection of music")
end
if getenv("STREAM_MOUNTPOINT") == "" then
    setenv("STREAM_MOUNTPOINT", "live")
end
if getenv("DJ_USERNAME") == "" then
    setenv("DJ_USERNAME", "source")
end
if getenv("DJ_PASSWORD") == "" then
    setenv("DJ_PASSWORD", "hackme")
end
if getenv("DJ_MOUNTPOINT") == "" then
    setenv("DJ_MOUNTPOINT", "/dj-on-air-live")
end

headers = ref([])

def on_connect(new_headers) =
    headers := new_headers
end

def add_dj_metadata(metadata) =
    headers = !headers
    name = headers["Ice-Name"]
    desc = headers["Ice-Description"]

    if (name != "" and desc != "") then
        list.add(("title", "#{name} (#{desc})"), metadata)
    elsif (name != "") then
        list.add(("title", "#{name}"), metadata)
    elsif (desc != "") then
        list.add(("title", "#{desc}"), metadata)
    else
        list.add(("title", "Live DJ Connected"), metadata)
    end
end

live = input.harbor(
    getenv("DJ_MOUNTPOINT"),
    icy=true,
    replay_metadata=true,
    max=2048.,
    port=8888,
    buffer=0.0,
    on_connect=on_connect,
    user=getenv("DJ_USERNAME"),
    password=getenv("DJ_PASSWORD")
)
live = map_metadata(add_dj_metadata, live)

autodj = crossfade(
    duration=3.0,
    smart=true,
    blank.eat(
        start_blank=true,
        max_blank=1.0,
        threshold=-45.0,
        playlist(
            mode="randomize",
            reload=1,
            reload_mode="rounds",
            "/music"
        )
    )
)

radio = mksafe(fallback(track_sensitive=false, [live, autodj]))

# Output
output.icecast(
    %mp3(
        bitrate=int_of_string(getenv("ICECAST_STREAM_BITRATE")),
        id3v2=true
    ),
    name=getenv("STREAM_NAME"),
    description=getenv("STREAM_DESC"),
    url=getenv("STREAM_URL"),
    mount=getenv("STREAM_MOUNTPOINT"),
    password=getenv("ICECAST_SOURCE_PASSWORD"),
    host="icecast",
    genre=getenv("STREAM_GENRE"),
    port=8000,
    encoding="UTF-8",
    radio
)
```

–í –∫–æ–¥—ñ –≤–∏ –º–æ–≥–ª–∏ –ø–æ–º—ñ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ `ICECAST_SOURCE_PASSWORD` —Ç–∞ `DJ_PASSWORD` —ñ–∑ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º 'hackme'. –ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ, –≤–∏ —ó—Ö, –∞ —Ç–∞–∫–æ–∂ —ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –∑–∞—Ä–∞–∑ –∑–º—ñ–Ω–∏—Ç–µ –≤ `.env` —Ñ–∞–π–ª—ñ:

```bash
# Web player config
SITE_URL=https://radio.example.com/
SITE_TITLE=Example Radio
SITE_DESCRIPTION=Best Variety Rock Hits + Live Shows
ICECAST_STREAM_URL=https://radio.example.com/live.mp3
ICECAST_STATUS_JSON_URL=https://radio.example.com/status-json.xsl
FEDIVERSE_URL=
GITHUB_URL=
XMPP_URL=

# Liquidsoap config
STREAM_NAME=Radio example.com
STREAM_DESC=Best Variety Rock Hits + Live Shows
STREAM_URL=http://radio.example.com
STREAM_MOUNTPOINT=live.mp3
STREAM_GENRE=Rock
DJ_USERNAME=source
DJ_PASSWORD=ADJPassword
DJ_MOUNTPOINT=dj-on-air-live

# Icecast config
ICECAST_PORT=8000
ICECAST_LOCATION=Ukraine
ICECAST_SOURCE_PASSWORD=ASourcePassword
ICECAST_RELAY_PASSWORD=APasswordForRelaysIGuess
ICECAST_ADMIN_PASSWORD=AnAdminPassword
ICECAST_ADMIN_USERNAME=emanresu
ICECAST_ADMIN_EMAIL=icemaster@localhost
ICECAST_HOSTNAME=localhost
ICECAST_MAX_SOURCES=1
ICECAST_MAX_CLIENTS=1000
ICECAST_CHARSET=UTF-8
```

–û–±–æ–≤'—è–∑–∫–æ–≤–æ –∑–∞–º—ñ–Ω—ñ—Ç—å `radio.example.com` –Ω–∞ —ñ–º'—è —Ö–æ—Å—Ç—É, —è–∫–∏–π –≤–∫–∞–∑–∞–ª–∏ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Nginx, –∞ —Ç–∞–∫–æ–∂ –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ —Ç–∞ –≤–∫–∞–∂—ñ—Ç—å —Å–≤–æ—ó –ø–∞—Ä–æ–ª—ñ –≤ –∑–º—ñ–Ω–Ω–∏—Ö `DJ_PASSWORD`, `ICECAST_SOURCE_PASSWORD`, `ICECAST_RELAY_PASSWORD` —Ç–∞ `ICECAST_ADMIN_PASSWORD`. –Ü –∑–≤—ñ—Å–Ω–æ –∂ –≤–∫–∞–∂—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ –æ–ø–∏—Å —Ä–∞–¥—ñ–æ –≤ –∑–º—ñ–Ω–Ω–∏—Ö `SITE_TITLE`, `SITE_DESCRIPTION`, `STREAM_NAME` —Ç–∞ `STREAM_DESC`.

–ó–∞–ª–∏—à–∏–≤—Å—è —Ç—ñ–ª—å–∫–∏ `docker-compose.yml` —Ñ–∞–π–ª, –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Ç–∞ –∑–∞–ø–∏—Å—É—î–º–æ –≤ –Ω—å–æ–≥–æ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```yml
version: '3'

services:
  webplayer:
    container_name: radio-webplayer
    image: "ghcr.io/uanet-exception/radio.social.net.ua:v1.0.0"
    restart: always
    ports:
      - "127.0.0.1:8080:8080"
    environment:
      - SITE_URL
      - SITE_TITLE
      - SITE_DESCRIPTION
      - ICECAST_STREAM_URL
      - ICECAST_STATUS_JSON_URL
      - FEDIVERSE_URL
      - GITHUB_URL
      - XMPP_URL
    depends_on:
      - liquidsoap
    volumes:
      - ./data/icestats_history.json:/opt/radio/icestats_history.json
      # - ./data/static/wallpaper.webp:/opt/radio/app/static/background.webp
      # - ./data/static/favicon.png:/opt/radio/app/static/favicon.png
      # - ./data/static/mic.jpg:/opt/radio/app/static/mic.jpg
      # - ./data/static/css/style.css:/opt/radio/app/static/css/style.css
      # - ./data/static/css/themes/default.css:/opt/radio/app/static/css/themes/default.css

  liquidsoap:
    container_name: radio-liquidsoap
    image: "ghcr.io/savonet/liquidsoap:v2.1.4"
    restart: always
    command: ["/script.liq"]
    ports:
      - "127.0.0.1:${LIQUIDSOAP_PORT:-1234}:1234"
      - "8888:8888"
    environment:
      - ICECAST_STREAM_BITRATE
      - ICECAST_SOURCE_PASSWORD
      - STREAM_NAME
      - STREAM_DESC
      - STREAM_URL
      - STREAM_GENRE
      - STREAM_MOUNTPOINT
      - DJ_USERNAME
      - DJ_PASSWORD
      - DJ_MOUNTPOINT
    depends_on:
      - icecast
    volumes:
      - ./data/music:/music:ro
      - ./data/script.liq:/script.liq:ro

  icecast:
    container_name: radio-icecast
    image: "ghcr.io/uanet-exception/icecast:v2.4.4"
    restart: always
    ports:
      - "127.0.0.1:${ICECAST_PORT:-8000}:8000"
    environment:
      - ICECAST_SOURCE_PASSWORD
      - ICECAST_RELAY_PASSWORD
      - ICECAST_ADMIN_PASSWORD
      - ICECAST_ADMIN_USERNAME
      - ICECAST_ADMIN_EMAIL
      - ICECAST_LOCATION
      - ICECAST_HOSTNAME
      - ICECAST_MAX_CLIENTS
      - ICECAST_MAX_SOURCES
      - ICECAST_CHARSET
```

–ü–æ–∫–∏ —â–æ –Ω—ñ—á–æ–≥–æ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≤ –Ω—å–æ–º—É –Ω–µ —Ç—Ä–µ–±–∞, –∞–ª–µ –≤–∏ –º–æ–≥–ª–∏ –≤–∂–µ –ø–æ–º—ñ—Ç–∏—Ç–∏ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω—ñ —Ä—è–¥–∫–∏ –≤ —Å–µ–∫—Ü—ñ—ó –¥–ª—è `webplayer`. –¶–µ –≤–∂–µ –≤–∞–º –±—É–¥–µ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞, —è–∫—â–æ –∑–∞—Ö–æ—á–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –≤–∏–≥–ª—è–¥ –≤–µ–± –ø–ª–µ—î—Ä–∞. –ó–≤—ñ—Å–Ω–æ –∂, —è–∫—â–æ –±—É–¥—É—Ç—å —Ç—Ä—É–¥–Ω–æ—â—ñ, —Ç–æ –Ω–µ —Å–æ—Ä–æ–º—Ç–µ—Å—å —Å—Ç–∞–≤–∏—Ç–∏ –≤–∞—à—ñ –ø–∏—Ç–∞–Ω–Ω—è —É –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö.

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –º–∏ –∑–∞–∫—ñ–Ω—á–∏–ª–∏ –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é, –∑–∞–ª–∏–≤–∞—î–º–æ –±—É–¥—å-—è–∫–∏–º –∑—Ä—É—á–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º —Å–≤–æ—ó —É–ª—é–±–ª–µ–Ω—ñ –∞—É–¥—ñ–æ—Ñ–∞–π–ª–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `data/music`, —ñ –ø—ñ–¥—ñ–π–º–∞—î–º–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏:

```plaintext
~/dockerized-apps/radio$ docker-compose up -d
Creating network "radio_default" with the default driver
Pulling icecast (ghcr.io/uanet-exception/icecast:v2.4.4)...
v2.4.4: Pulling from uanet-exception/icecast
...
6ceee0e1ef2d: Pull complete
Digest: sha256:a36956c457439d1ff46ab9c9d344b15e84086dea003d481a47513c02771439c3
Status: Downloaded newer image for ghcr.io/uanet-exception/icecast:v2.4.4
Pulling liquidsoap (ghcr.io/savonet/liquidsoap:v2.1.0)...
v2.1.0: Pulling from savonet/liquidsoap
...
1f7f75df6d97: Pull complete
Digest: sha256:50ca328d12324d57cce21ab9fef42adc8ea20f5e520da54a03b7d0a1227bfd99
Status: Downloaded newer image for ghcr.io/savonet/liquidsoap:v2.1.0
Pulling webplayer (ghcr.io/uanet-exception/radio.social.net.ua:v1.0.0)...
v1.0.0: Pulling from uanet-exception/radio.social.net.ua
...
06e1ddc3ed0a: Pull complete
Digest: sha256:133e11746b2dc227d86cb9fed6cba251748e6e74b5618384d9d1ce359606e944
Status: Downloaded newer image for ghcr.io/uanet-exception/radio.social.net.ua:v1.0.0
Creating radio-icecast ... done
Creating radio-liquidsoap ... done
Creating radio-webplayer  ... done
```

–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤—Å—ñ –≤–æ–Ω–∏ –≤ —Å—Ç–∞—Ç—É—Å—ñ Up:

```plaintext
~/dockerized-apps/radio$ docker-compose ps
     Name                    Command               State                                 Ports                               
------------------------------------------------------------------------------------------------------------------------------
radio-icecast      /entrypoint.sh /bin/sh -c  ...   Up      127.0.0.1:8000->8000/tcp                                          
radio-liquidsoap   /usr/bin/tini -- /usr/bin/ ...   Up      127.0.0.1:1234->1234/tcp, 0.0.0.0:8888->8888/tcp,:::8888->8888/tcp
radio-webplayer    /usr/bin/supervisord -n -c ...   Up      127.0.0.1:8080->8080/tcp
```

–Ü –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø–ª–µ—î—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ, —Ç–∏—Ü—è—î–º–æ –Ω–∞ –∫–Ω–æ–ø–∫—É Play, –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —î –∑–≤—É–∫. –í–∂–µ –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ, –∑ –º–æ–∂–ª–∏–≤–æ—é –∑–∞—Ç—Ä–∏–º–∫–æ—é –≤ 5-10 —Å–µ–∫—É–Ω–¥, –Ω–∞ –≤–µ–±—Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –º–∞—î –±—É—Ç–∏ –≤–∏–¥–Ω–æ –ø–æ—Ç–æ—á–Ω–∏–π —Ç—Ä–µ–∫. –ó—ñ –∑–º—ñ–Ω–æ—é —Ç—Ä–µ–∫—ñ–≤ –ø–æ—á–Ω–µ —Ç–∞–∫–æ–∂ –∑–∞–ø–æ–≤–Ω—é–≤–∞—Ç–∏—Å—å —ñ—Å—Ç–æ—Ä—ñ—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ç—Ä–µ–∫—ñ–≤.

–©–æ–¥–æ –≤–ª–∞—Å–Ω–∏—Ö —Å—Ç—Ä—ñ–º—ñ–≤ –Ω–∞ —Ä–∞–¥—ñ–æ, —Ç–æ –≤–∏ –º–æ–∂–µ—Ç–µ, —è–∫ —ñ —è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É Mixxx, —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –≤ Options->Live Broadcasting –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Server connection –ø–æ–¥—ñ–±–Ω–∏–º —á–∏–Ω–æ–º:

![Mixxx Preferences](/images/2024/webradio/mixxx_preferences.png#center)

–Ø–∫ –º–æ–∂–Ω–∞ –∑–¥–æ–≥–∞–¥–∞—Ç–∏—Å—å, –¥–µ—è–∫—ñ —ñ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –Ω–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ –º–∏ —Ä–∞–Ω—ñ—à–µ –≤–∫–∞–∑—É–≤–∞–ª–∏ –≤ `.env` —Ñ–∞–π–ª—ñ –≤ –∑–º—ñ–Ω–Ω–∏—Ö `DJ_USERNAME`, `DJ_PASSWORD` —Ç–∞ `DJ_MOUNTPOINT`. –¢–∞–∫–æ–∂, –∑–≤–µ—Ä–Ω—É—Ç—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ Metadata->Format, —è–∫ –±–∞—á–∏—Ç–µ, –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π –ø—Ä–µ—Ñ—ñ–∫—Å –¥–æ –Ω–∞–∑–≤–∏ –ø—ñ—Å–Ω—ñ, –∞–±–∏ –ø—ñ–¥–∫—Ä–µ—Å–ª–∏—Ç–∏, —â–æ –∑–∞ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–æ–º –∑–∞—Ä–∞–∑ —Å–∏–¥–∏—Ç—å –∂–∏–≤–∏–π –¥—ñ-–¥–∂–µ–π.

–ü—Ä–æ Mixxx –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ —Ä–æ–∑–ø–∏—Å—É–≤–∞—Ç–∏ –Ω–µ –±—É–¥—É, —Ü–µ —Ç–µ–º–∞ –¥–ª—è –æ–∫—Ä–µ–º–æ—ó —Å—Ç–∞—Ç—Ç—ñ, –¥–æ —Ç–æ–≥–æ –∂ –≤–∏ –º–æ–∂–µ—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—å —ñ–Ω—à–æ—é –ø—Ä–æ–≥—Ä–∞–º–æ—é, –Ω–∞–≤—ñ—Ç—å —Å—Ç—Ä—ñ–º–∏—Ç–∏ –≥–æ–ª–∏–º ffmpeg —ñ–∑ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∞. –ê –∑–∞—Ä–∞–∑ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º, —Ç–∞ –¥—ñ–ª—ñ—Ç—å—Å—è —ñ–∑ –¥—Ä—É–∑—è–º–∏ —Å–≤–æ—î—é —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–∞–¥—ñ–æ—Å—Ç–∞–Ω—Ü—ñ—î—é (–±–∞–∂–∞–Ω–æ —Ä–∞–∑–æ–º —ñ–∑ —Ü—ñ—î—é —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é üòâ). –¢–∞–∫–æ–∂, –Ω–µ —Å–æ—Ä–æ–º—Ç–µ—Å—å –¥–æ–¥–∞–≤–∞—Ç–∏ —Å–≤–æ—î —Ä–∞–¥—ñ–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø—Ä–æ—î–∫—Ç—É [radio-browser.info](https://www.radio-browser.info/) (–∫–Ω–æ–ø–∫–∞ New station –≤ –º–µ–Ω—é), —Ü–µ –∑—Ä–æ–±–∏—Ç—å –π–æ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–∏–º –≤ –∫—É–ø—ñ –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü–µ–π —Å–∞–π—Ç –¥–ª—è –ø–æ—à—É–∫—É –æ–Ω–ª–∞–π–Ω —Å—Ç—Ä—ñ–º—ñ–≤.
